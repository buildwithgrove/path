# This file shows examples of how to configure PATH gateway endpoints using a YAML file as the PADS data source.
# These files will be converted to the proto.GatewayEndpoint struct expected by the PATH's Go External Auth Server.
# 
# For details on the expected proto format, see the definition in 
# envoy/auth_server/proto/gateway_endpoint.proto
endpoints:

  # 1. Example of a gateway endpoint using API Key Authorization
  endpoint_1:                                                # The unique identifier for a gateway endpoint.
    auth:
      auth_type: "API_KEY_AUTH"                              # This endpoint uses API Key Authorization.
      api_key: "api_key_1"                                   # For API Key Authorization, the API key string is required.

    rate_limiting:                                           # This endpoint has no rate limits defined (the rate_limiting field may be omitted entirely in this case).

    metadata:                                                # Metadata fields may be any key-value pairs and are optional.
      plan_type: "PLAN_UNLIMITED"                            # Example of a key-value pair (in this case, a pricing plan).
      account_id: "account_1"                                # Example of a key-value pair (in this case, an account ID).
      owner_email: "amos.burton@opa.belt"                    # Example of a key-value pair (in this case, an owner email).

  # 2. Example of a gateway endpoint using JWT Authorization
  endpoint_2:
    auth:
      auth_type: "JWT_AUTH"                                  # This endpoint uses JWT Authorization.
      jwt_authorized_users:                                  # For JWT Authorization, the jwt_authorized_users array is required.
        - "auth0|user_1"                                     # The user ID of an authorized user (in this case, a user ID provided by Auth0).
        - "auth0|user_2"

    metadata:
      plan_type: "PLAN_UNLIMITED"  
      account_id: "account_2"
      owner_email: "paul.atreides@arrakis.com"

  # 3. Example of a gateway endpoint with no authorization
  endpoint_3:
    auth:                                                    # This endpoint does not use any authorization (the auth field may be omitted entirely in this case).
    
    rate_limiting:                                           # This endpoint has a rate limit defined
      throughput_limit: 50                                   # Throughput limit defines the endpoint's per-second (TPS) rate limit.
      capacity_limit: 200                                    # Capacity limit defines the endpoint's rate limit over longer periods.
      capacity_limit_period: "CAPACITY_LIMIT_PERIOD_MONTHLY" # Capacity limit period defines the period over which the capacity limit is enforced.

    metadata:
      plan_type: "PLAN_FREE"
      account_id: "account_2"
      owner_email: "frodo.baggins@shire.io"
